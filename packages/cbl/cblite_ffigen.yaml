name: cblite
description: Bindings for Couchbase Lite C API
output:
  bindings: lib/src/bindings/cblite.dart
  symbol-file:
    output: package:cbl/src/bindings/cblite_symbols.yaml
    import-path: package:cbl/src/bindings/cblite.dart
preamble: |
  // ignore_for_file: unused_field
headers:
  entry-points:
    - src/vendor/cblite/include/cbl/CouchbaseLite.h
    - src/vendor/cblite/include/fleece/Fleece.h
    - src/vendor/cblite/include/fleece/FLExpert.h
    - src/vendor/cblite/include/fleece/FLSlice.h
  include-directives:
    - src/vendor/cblite/include/cbl/**
    - src/vendor/cblite/include/fleece/**
functions:
  rename:
    _FLBuf_Release: FLBuf_Release
    _FLBuf_Retain: FLBuf_Retain
  expose-typedefs:
    include:
      - '.*'
compiler-opts:
  - '-Isrc/vendor/cblite/include'
  # CBL uses a macro to define enums which is called CBL_ENUM.
  # On Apple systems the CBL aliases CF_ENUM to CBL_ENUM which seems to be a
  # problem for ffigen.
  # As a workaround we define __APPLE__ to 0 to avoid the aliasing.
  - '-D__APPLE__=0'
ffi-native:
ignore-source-errors: true
