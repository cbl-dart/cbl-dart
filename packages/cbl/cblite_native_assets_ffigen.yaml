name: cblite
description: Bindings for Couchbase Lite C API
output:
  bindings: lib/src/bindings/cblite_native_assets.dart
import:
  symbol-files:
    - package:cbl/src/bindings/cblite_native_assets_symbols.yaml
ffi-native:
comments: false
preamble: |
  // ignore_for_file: unused_field
headers:
  entry-points:
    - ../../native/vendor/cblite/include/cbl/CouchbaseLite.h
    - ../../native/vendor/cblite/include/fleece/Fleece.h
    - ../../native/vendor/cblite/include/fleece/FLExpert.h
    - ../../native/vendor/cblite/include/fleece/FLSlice.h
  include-directives:
    - ../../native/vendor/cblite/include/cbl/**
    - ../../native/vendor/cblite/include/fleece/**
functions:
  rename:
    _FLBuf_Release: FLBuf_Release
    _FLBuf_Retain: FLBuf_Retain
  expose-typedefs:
    include:
      - '.*'
  symbol-address:
    include:
      - CBL_Release
      - CBLBlobReader_Close
      - CBLListenerAuth_Free
      - FLDoc_Release
      - FLEncoder_Free
      - FLSharedKeys_Release
      - FLValue_Release
  leaf:
    include:
      - CBLDatabase_SaveDocument
      - CBLDatabase_SaveDocumentWithConcurrencyControl
      - CBLDatabase_DeleteDocument
      - CBLDatabase_DeleteDocumentWithConcurrencyControl
      - CBLDatabase_PurgeDocument
      - CBLDatabase_PurgeDocumentByID
      - CBLDatabase_GetMutableDocument
      - CBLDatabase_GetDocumentExpiration
      - CBLDatabase_SetDocumentExpiration
      - CBLDatabase_ScopeNames
      - CBLDatabase_CollectionNames
      - CBLDatabase_Scope
      - CBLDatabase_Collection
      - CBLDatabase_CreateCollection
      - CBLDatabase_DeleteCollection
      - CBLDatabase_DefaultScope
      - CBLDatabase_DefaultCollection
      - CBLDatabase_Open
      - CBLDatabase_Close
      - CBLDatabase_Delete
      - CBLDatabase_BeginTransaction
      - CBLDatabase_EndTransaction
      - CBLDatabase_ChangeEncryptionKey
      - CBLDatabase_PerformMaintenance
      - CBLDatabase_Name
      - CBLDatabase_Path
      - CBLDatabase_Count
      - CBLDatabase_Config
      - CBLDatabase_CreateValueIndex
      - CBLDatabase_CreateFullTextIndex
      - CBLDatabase_DeleteIndex
      - CBLDatabase_GetIndexNames
      - CBLCollection_Scope
      - CBLCollection_Name
      - CBLCollection_FullName
      - CBLCollection_Database
      - CBLCollection_Count
      - CBLCollection_GetDocument
      - CBLCollection_SaveDocument
      - CBLCollection_SaveDocumentWithConcurrencyControl
      - CBLCollection_DeleteDocument
      - CBLCollection_DeleteDocumentWithConcurrencyControl
      - CBLCollection_PurgeDocument
      - CBLCollection_PurgeDocumentByID
      - CBLCollection_GetDocumentExpiration
      - CBLCollection_SetDocumentExpiration
      - CBLCollection_GetMutableDocument
      - CBLCollection_CreateValueIndex
      - CBLCollection_CreateFullTextIndex
      - CBLCollection_CreateArrayIndex
      - CBLCollection_CreateVectorIndex
      - CBLCollection_DeleteIndex
      - CBLCollection_GetIndexNames
      - CBLCollection_GetIndex
      - CBLCollection_AddChangeListener
      - CBLCollection_AddDocumentChangeListener
structs:
  member-rename:
    FLDictKey:
      _private1: private1
      _private2: private2
      _private3: private3
enums:
  as-int:
    include:
      - '.*'
compiler-opts:
  - '-I../../native/vendor/cblite/include'
  # CBL uses a macro to define enums which is called CBL_ENUM.
  # On Apple systems the CBL aliases CF_ENUM to CBL_ENUM which seems to be a
  # problem for ffigen.
  # As a workaround we define __APPLE__ to 0 to avoid the aliasing.
  - '-D__APPLE__=0'
  - '-DCOUCHBASE_ENTERPRISE=0'
ignore-source-errors: true
