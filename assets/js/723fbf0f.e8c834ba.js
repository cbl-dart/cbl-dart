"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[267],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=a.createContext({}),s=function(e){var t=a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(r.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,r=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=s(n),u=o,f=d["".concat(r,".").concat(u)]||d[u]||m[u]||l;return n?a.createElement(f,i(i({ref:t},p),{},{components:n})):a.createElement(f,i({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,i=new Array(l);i[0]=u;var c={};for(var r in t)hasOwnProperty.call(t,r)&&(c[r]=t[r]);c.originalType=e,c[d]="string"==typeof e?e:o,i[1]=c;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5367:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>i,default:()=>f,frontMatter:()=>l,metadata:()=>c,toc:()=>s});var a=n(7462),o=(n(7294),n(3905));const l={description:"Scopes and collections allow you to organize your documents within a database."},i="Scopes and Collections",c={unversionedId:"scopes-and-collections",id:"scopes-and-collections",title:"Scopes and Collections",description:"Scopes and collections allow you to organize your documents within a database.",source:"@site/docs/scopes-and-collections.mdx",sourceDirName:".",slug:"/scopes-and-collections",permalink:"/scopes-and-collections",draft:!1,editUrl:"https://github.com/cbl-dart/cbl-dart/tree/main/docs/docs/scopes-and-collections.mdx",tags:[],version:"current",frontMatter:{description:"Scopes and collections allow you to organize your documents within a database."},sidebar:"sidebar",previous:{title:"Pre-built Database",permalink:"/prebuilt-database"},next:{title:"Documents",permalink:"/documents"}},r={},s=[{value:"Default Scopes and Collections",id:"default-scopes-and-collections",level:2},{value:"Create a Scope and Collection",id:"create-a-scope-and-collection",level:2},{value:"Index a Collection",id:"index-a-collection",level:2},{value:"Drop a Collection",id:"drop-a-collection",level:2},{value:"List Scopes and Collections",id:"list-scopes-and-collections",level:2}],p=(d="CodeExample",function(e){return console.warn("Component "+d+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",e)});var d;const m={toc:s},u="wrapper";function f(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"scopes-and-collections"},"Scopes and Collections"),(0,o.kt)("metaheader",null),(0,o.kt)("admonition",{title:"At a Glance",type:"info"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Use collections to organize your content in a database")),(0,o.kt)("p",{parentName:"admonition"},"For example, if your database contains travel information, airport documents can\nbe assigned to an airports collection, hotel documents can be assigned to a\nhotels collection, and so on."),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Document names must be unique within their collection.")),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Use scopes to group multiple collections")),(0,o.kt)("p",{parentName:"admonition"},"Collections can be assigned to different scopes according to content-type or\ndeployment-phase (for example, test versus production)."),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Collection names must be unique within their scope."))),(0,o.kt)("h2",{id:"default-scopes-and-collections"},"Default Scopes and Collections"),(0,o.kt)("p",null,"Every database you create contains a default scope and a default collection\nnamed ",(0,o.kt)("inlineCode",{parentName:"p"},"_default"),"."),(0,o.kt)("p",null,"If you create a document in the database and don't specify a specific scope or\ncollection, it is saved in the default collection, in the default scope."),(0,o.kt)("p",null,"If you upgrade from a version of Couchbase Lite prior to support for scops and\ncollections, all existing data is automatically placed in the default scope and\ndefault collection."),(0,o.kt)("p",null,"The default scope and collection cannot be dropped."),(0,o.kt)("h2",{id:"create-a-scope-and-collection"},"Create a Scope and Collection"),(0,o.kt)("p",null,"In addition to the default scope and collection, you can create your own scope\nand collection when you create a document."),(0,o.kt)("p",null,"Naming conventions for collections and scopes:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Must be between 1 and 251 characters in length."),(0,o.kt)("li",{parentName:"ul"},"Can only contain the characters ",(0,o.kt)("inlineCode",{parentName:"li"},"A-Z"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"a-z"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"0-9"),", and the symbols ",(0,o.kt)("inlineCode",{parentName:"li"},"_"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"-"),",\nand ",(0,o.kt)("inlineCode",{parentName:"li"},"%"),"."),(0,o.kt)("li",{parentName:"ul"},"Cannot start with ",(0,o.kt)("inlineCode",{parentName:"li"},"_")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"%"),"."),(0,o.kt)("li",{parentName:"ul"},"Scope names must be unique in databases."),(0,o.kt)("li",{parentName:"ul"},"Collection names must be unique within a scope.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Scope and collection names are case sensitive.")),(0,o.kt)(p,{id:1,title:"Create a scope and collection",mdxType:"CodeExample"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"final collection = await database.createCollection('myCollectionName', 'myScopeName');\n"))),(0,o.kt)("p",null,"In the example above, you can see that ",(0,o.kt)("a",{parentName:"p",href:"https://pub.dev/documentation/cbl/latest/cbl/Database/createCollection.html"},(0,o.kt)("inlineCode",{parentName:"a"},"Database.createCollection"))," can take\ntwo parameters. The second is the scope assigned to the created collection, if\nthis parameter is omitted then a collection of the given name will be assigned\nto the ",(0,o.kt)("inlineCode",{parentName:"p"},"_default")," scope."),(0,o.kt)("p",null,"The first parameter is the name of the collection you want to create, in this\ncase ",(0,o.kt)("inlineCode",{parentName:"p"},"myCollectionName"),"."),(0,o.kt)("p",null,"If a collection with the specified name already exists in the specified scope,\n",(0,o.kt)("a",{parentName:"p",href:"https://pub.dev/documentation/cbl/latest/cbl/Database/createCollection.html"},(0,o.kt)("inlineCode",{parentName:"a"},"Database.createCollection"))," returns the existing collection."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"You cannot create an empty user-defined scope. A scope is implicitly created and\nremoved by the ",(0,o.kt)("a",{parentName:"p",href:"https://pub.dev/documentation/cbl/latest/cbl/Database/createCollection.html"},(0,o.kt)("inlineCode",{parentName:"a"},"Database.createCollection"))," and\n",(0,o.kt)("a",{parentName:"p",href:"https://pub.dev/documentation/cbl/latest/cbl/Database/deleteCollection.html"},(0,o.kt)("inlineCode",{parentName:"a"},"Database.deleteCollection"))," methods.")),(0,o.kt)("h2",{id:"index-a-collection"},"Index a Collection"),(0,o.kt)(p,{id:2,title:"Index a Collection",mdxType:"CodeExample"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"final config = FullTextIndexConfiguration(['overview']);\nawait collection.createIndex('overviewFTSIndex', config);\n"))),(0,o.kt)("h2",{id:"drop-a-collection"},"Drop a Collection"),(0,o.kt)(p,{id:3,title:"Drop a Collection",mdxType:"CodeExample"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"await database.deleteCollection('myCollectionName', 'myScopeName');\n"))),(0,o.kt)("h2",{id:"list-scopes-and-collections"},"List Scopes and Collections"),(0,o.kt)(p,{id:4,title:"List Scopes and Collections",mdxType:"CodeExample"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"final scopes = await database.scopes;\nfinal collections = await database.collections('myScopeName');\nprint(\n  'I have ${scopes.length} scopes and ${collections.length} collections '\n  'in scope \"myScopeName\"',\n);\n"))))}f.isMDXComponent=!0}}]);